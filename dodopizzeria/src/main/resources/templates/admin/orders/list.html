<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: head('VÅ¡etky objednÃ¡vky')}"></head>
<body class="bg-dodo-light min-h-screen flex flex-col">

<nav th:replace="~{fragments/header :: navbar}"></nav>
<div th:replace="~{fragments/alerts :: alerts}"></div>

<main class="flex-grow">
    <div class="max-w-6xl mx-auto px-4 py-8">
        <a href="/admin" class="text-dodo-orange hover:underline mb-4 inline-block">&larr; Admin Panel</a>
        <h1 class="text-3xl font-bold text-dodo-dark mb-8">ðŸ“‹ VÅ¡etky objednÃ¡vky</h1>

        <!-- Search -->
        <form th:action="@{/admin/orders}" method="get" class="mb-6">
            <div class="flex gap-4">
                <input type="text" name="search" th:value="${search}" placeholder="HÄ¾adaÅ¥ podÄ¾a ÄÃ­sla alebo mena..."
                       class="flex-grow px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-dodo-orange">
                <button type="submit" class="bg-dodo-dark text-white px-6 py-2 rounded-lg hover:bg-dodo-blue transition">HÄ¾adaÅ¥</button>
            </div>
        </form>

        <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
            <table class="w-full">
                <thead class="bg-gray-50">
                <tr>
                    <th class="text-left py-4 px-6 text-gray-600 font-medium">ÄŒÃ­slo</th>
                    <th class="text-left py-4 px-6 text-gray-600 font-medium">ZÃ¡kaznÃ­k</th>
                    <th class="text-left py-4 px-6 text-gray-600 font-medium">Adresa</th>
                    <th class="text-center py-4 px-6 text-gray-600 font-medium">Stav</th>
                    <th class="text-right py-4 px-6 text-gray-600 font-medium">Suma</th>
                    <th class="text-right py-4 px-6 text-gray-600 font-medium">DÃ¡tum</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="order : ${orders.content}" class="border-b border-gray-100 hover:bg-gray-50">
                    <td class="py-4 px-6">
                        <a th:href="@{/admin/orders/{id}(id=${order.id})}" th:text="${order.orderNumber}"
                           class="text-dodo-orange font-medium hover:underline">DP-xxx</a>
                    </td>
                    <td class="py-4 px-6" th:text="${order.user.fullName}">Meno</td>
                    <td class="py-4 px-6 text-gray-500 truncate max-w-xs" th:text="${order.deliveryAddress}">Adresa</td>
                    <td class="py-4 px-6 text-center">
                        <span th:text="${order.status.displayNameSk}"
                              th:classappend="${order.status.name() == 'PENDING'} ? 'bg-yellow-100 text-yellow-800' :
                                  (${order.status.name() == 'PREPARING'} ? 'bg-blue-100 text-blue-800' :
                                  (${order.status.name() == 'READY'} ? 'bg-purple-100 text-purple-800' :
                                  (${order.status.name() == 'DELIVERING'} ? 'bg-orange-100 text-orange-800' :
                                  (${order.status.name() == 'DELIVERED'} ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'))))"
                              class="px-2 py-1 rounded-full text-xs font-medium">
                            Stav
                        </span>
                    </td>
                    <td class="py-4 px-6 text-right font-semibold">
                        <span th:text="${#numbers.formatDecimal(order.totalPriceEur, 1, 2)}">0.00</span> â‚¬
                    </td>
                    <td class="py-4 px-6 text-right text-gray-500" th:text="${#temporals.format(order.createdAt, 'dd.MM. HH:mm')}">01.01.</td>
                </tr>
                </tbody>
            </table>
        </div>

        <div th:if="${orders.totalPages > 1}" th:replace="~{fragments/pagination :: pagination(${orders}, '/admin/orders')}"></div>
    </div>
</main>

<footer th:replace="~{fragments/footer :: footer}"></footer>

</body>
</html>

